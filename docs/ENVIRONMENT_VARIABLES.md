# üîê Environment Variables Guide

Complete reference for all environment variables needed across all services.

## üé¨ Video Factory

### Required Variables

```bash
# OpenAI Configuration
OPENAI_API_KEY=sk-...
OPENAI_BASE_URL=https://api.openai.com/v1

# Moonshot API (Alternative LLM)
MOONSHOT_API_KEY=sk-...

# Pexels API (Stock footage)
PEXELS_API_KEY=...

# ImageMagick
IMAGEMAGICK_BINARY=/usr/bin/convert

# Server Configuration
PORT=8080
HOST=0.0.0.0
```

### Optional Variables

```bash
# Storage
STORAGE_PATH=/app/storage

# Background Music
BGM_ENABLED=true
BGM_VOLUME=0.3

# Voice Settings
TTS_PROVIDER=openai
VOICE_NAME=alloy
```

## üõí Store Platform (Bagisto)

### Required Variables

```bash
# Application
APP_NAME="Dropshipping Store"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://your-domain.railway.app
APP_KEY=base64:...  # Generate with: php artisan key:generate

# Database (PostgreSQL)
DB_CONNECTION=pgsql
DB_HOST=${{Postgres.PGHOST}}
DB_PORT=${{Postgres.PGPORT}}
DB_DATABASE=${{Postgres.PGDATABASE}}
DB_USERNAME=${{Postgres.PGUSER}}
DB_PASSWORD=${{Postgres.PGPASSWORD}}

# Redis
REDIS_HOST=${{Redis.REDIS_HOST}}
REDIS_PASSWORD=${{Redis.REDIS_PASSWORD}}
REDIS_PORT=${{Redis.REDIS_PORT}}

# Cache & Sessions
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# Mail
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@yourstore.com
MAIL_FROM_NAME="${APP_NAME}"
```

### Optional Variables

```bash
# Payment Gateways
PAYPAL_CLIENT_ID=...
PAYPAL_SECRET=...
STRIPE_KEY=...
STRIPE_SECRET=...

# Storage
FILESYSTEM_DISK=local

# Admin Configuration
ADMIN_PATH=admin
```

## üìß Marketing Suite

### Required Variables

```bash
# Application
NODE_ENV=production
PORT=3000

# Database
DATABASE_URL=${{Postgres.DATABASE_URL}}

# Redis
REDIS_URL=${{Redis.REDIS_URL}}

# Email Provider (Choose one)
# SendGrid
SENDGRID_API_KEY=...

# Mailgun
MAILGUN_API_KEY=...
MAILGUN_DOMAIN=mg.yourdomain.com

# AWS SES
AWS_ACCESS_KEY_ID=...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-east-1
```

### Optional Variables

```bash
# JWT Authentication
JWT_SECRET=your-secret-key
JWT_EXPIRES_IN=7d

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=15m

# Analytics
GOOGLE_ANALYTICS_ID=UA-...
```

## ü§ñ Research Bot

### Required Variables

```bash
# Playwright
PLAYWRIGHT_BROWSERS_PATH=/ms-playwright

# Server
PORT=8090
```

### Optional Variables

```bash
# Proxy Configuration
HTTP_PROXY=http://proxy.example.com:8080
HTTPS_PROXY=http://proxy.example.com:8080

# Browser Settings
HEADLESS=true
TIMEOUT=30000
```

## üîÑ n8n Workflow Engine

### Required Variables

```bash
# Host Configuration
N8N_HOST=your-n8n-domain.railway.app
N8N_PROTOCOL=https
N8N_PORT=5678

# Database (PostgreSQL)
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=${{Postgres.PGHOST}}
DB_POSTGRESDB_PORT=${{Postgres.PGPORT}}
DB_POSTGRESDB_DATABASE=${{Postgres.PGDATABASE}}
DB_POSTGRESDB_USER=${{Postgres.PGUSER}}
DB_POSTGRESDB_PASSWORD=${{Postgres.PGPASSWORD}}

# Authentication
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=secure-password-here

# Timezone
GENERIC_TIMEZONE=America/New_York
```

### Optional Variables

```bash
# Webhooks
WEBHOOK_URL=https://your-n8n-domain.railway.app

# Execution
EXECUTIONS_PROCESS=main
EXECUTIONS_TIMEOUT=300
EXECUTIONS_TIMEOUT_MAX=3600

# Encryption
N8N_ENCRYPTION_KEY=...  # Auto-generated if not set
```

## üóÑÔ∏è PostgreSQL

Managed by Railway. Reference variables in other services:

```bash
${{Postgres.PGHOST}}
${{Postgres.PGPORT}}
${{Postgres.PGDATABASE}}
${{Postgres.PGUSER}}
${{Postgres.PGPASSWORD}}
${{Postgres.DATABASE_URL}}
```

## üì¶ Redis

Managed by Railway. Reference variables in other services:

```bash
${{Redis.REDIS_HOST}}
${{Redis.REDIS_PORT}}
${{Redis.REDIS_PASSWORD}}
${{Redis.REDIS_URL}}
```

## üîó Service URLs (Auto-generated by Railway)

```bash
# Reference other services
VIDEO_FACTORY_URL=${{video-factory.RAILWAY_PUBLIC_DOMAIN}}
STORE_PLATFORM_URL=${{store-platform.RAILWAY_PUBLIC_DOMAIN}}
MARKETING_SUITE_URL=${{marketing-suite.RAILWAY_PUBLIC_DOMAIN}}
N8N_URL=${{n8n.RAILWAY_PUBLIC_DOMAIN}}
```

## üõ†Ô∏è How to Set Variables in Railway

### Via Dashboard

1. Go to your service
2. Click **Variables** tab
3. Click **+ New Variable**
4. Enter name and value
5. Click **Add**

### Via CLI

```bash
railway variables set VARIABLE_NAME=value
```

### Bulk Import

Create a `.env` file and use:

```bash
railway variables set < .env
```

## üîí Security Best Practices

1. **Never commit `.env` files to Git**
   - Already excluded in `.gitignore`

2. **Use Railway's variable references**
   - Use `${{Service.VARIABLE}}` syntax
   - Automatically updates if service changes

3. **Rotate secrets regularly**
   - API keys
   - Database passwords
   - JWT secrets

4. **Use strong passwords**
   - Minimum 16 characters
   - Mix of letters, numbers, symbols

5. **Limit variable visibility**
   - Don't log sensitive values
   - Use Railway's encrypted storage

## üìã Quick Setup Checklist

### video-factory
- [ ] OPENAI_API_KEY
- [ ] PEXELS_API_KEY
- [ ] IMAGEMAGICK_BINARY

### store-platform
- [ ] APP_KEY (generate first!)
- [ ] Database connection
- [ ] Redis connection
- [ ] MAIL_* variables

### marketing-suite
- [ ] DATABASE_URL
- [ ] REDIS_URL
- [ ] Email provider keys

### n8n
- [ ] N8N_HOST
- [ ] Database connection
- [ ] N8N_BASIC_AUTH_PASSWORD

---

**Last Updated**: 2024
